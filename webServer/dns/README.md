## dns

### dns解析过程
我们通过用户在浏览器的地址栏敲入了网站的网址的DNS解析为例子

1. 查找浏览器缓存: 浏览器会检查缓存中有没有这个域名对应解析过的IP地址,如果缓存中有,这个解析过程就将结束。但是浏览器缓存的域名也是有大小/时间限制的。
2. 查找系统缓存: 如果用户的浏览器缓存中没有,浏览器会查找操作系统缓存中是否有这个域名对应的DNS解析过程。即查找host文件,你可以将域名解析到任何能够访问的IP地址,如果你指定了域名对应的IP地址,浏览器会优先访问这个IP,但是黑客有可能劫持你的HOST文件,将你的域名解析到特定的IP地址上.
3. 查找路由器缓存,如果系统缓存中也找不到那就是路由器缓存了
4. 查找ISP DNS缓存如果还没能够查找到,那就只能查找ISP DNS缓存了。在我们的网络配置中,通常都会有DNS服务器地址这一栏,操作系统会把这个域名发送给这里设置的DNS,也就是本地区的域名服务器,通常是提供给你接入互联网的应用提供商。这个专门的域名解析服务器性能都会很好,他们一般都会缓存域名解析结果,当然缓存的时间都是受控制的,80%的域名在这里都能解析完成
5. 递归查询: 如果在前面都没有办法命中DNS缓存的情况下,将会有下列操作
   - 本地DNS服务器将所要查询的请求转发到互联网的根域
   - 根域将所要查询域名的顶级域(比如要查询baidu.com那么顶级域就是com)的服务器IP地址返回到本地DNS
   - 本地DNS根据返回的IP地址,再向顶级域发送请求
   - com域服务器将域名中的二级域的ip地址返回给本地DNS
   - 本地DNS再向二级发送请求查询
   - 不断重复这个过程直到查到最终的结果。这个时候主机才能通过ip访问到主机

### 递归查询和迭代查询
1. 本机向本地域名服务器的查询一般都是使用递归查询

2. 本地域名服务器向根域名服务器的查询的迭代查询


3. 总结: 
- 递归查询: 客户端只发出一次请求,要求对方给出最终结果
- 迭代查询: 客户端发出一次请求,如果对方没有授权回答,他就会返回一个能解答这个查询的其他名称服务器列表,客户端会再向返回的列表中发出请求,直到找到最终负责所查询域名的名称服务器,从它得到最终结果
- 授权回答: 向dns服务器查询一个域名, 刚好这个域名是本服务器负责,返回的结果就是授权回答

从递归和迭代查询可以看出: 
- 客户端-本地dns服务端: 这是属于递归查询
- 本地dns服务器-外网: 这部分属于迭代查询
- 递归查询时,返回的结果只有两种: 查询成功和查询失败
- 迭代查询,又称作重指引,返回的是最佳查询点或者主机地址
### DNS有关的安全问题

### DNS有关的网络性能优化