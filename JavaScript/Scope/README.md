### 执行上下文
> 当一个作用域执行时,会创建一个执行上下文的内部对象(作用域)。一个执行上下文定义了一个函数执行时的环境。


最初的作用域栈栈中只有Script和Global
### 执行上下文的两个阶段
在JavaScript解释器内部,每次调用执行上下文,分为两个阶段,创建阶段和激活/代码执行阶段

#### 创建阶段
第一阶段是创建阶段,(在函数被调用,但未执行任何其内部代码之前)。在创建阶段主要做三件事

- 词法环境组件
   - 创建作用域链
   - 创建变量对象(即使是let/const也会在这个时候创建并挂载在作用域对象下并赋值undefined)
- 变量环境组件(也是一个词法环境组件)
- 寻找this的值(函数作用域Local才会做这件事,因为块级作用域Block会寻找上一个作用域的this来当做自己的this直到找到window)

#### 激活/代码执行阶段

- 创建状态负责处理定义属性的名字,不为其指派具体的值,以形参/实参处理。
- 一旦创建阶段完成,执行流进入函数并且激活/代码执行阶段

### 作用域
作用域分为词法作用域(静态作用域)和动态作用域
- 词法作用域(静态作用域): 函数的作用域链在定义时被决定
- 动态作用域: 函数的作用域在调用时被决定

而JavaScript是词法作用域(静态作用域)

作用域: 是运行时代码中的某些特定部分中的变量,函数的可访问性。

作用域链: 在一个作用域下创建了另一个作用域就产生了作用域链,被创建的作用域找不到该值时,会向创造其的作用域寻找值

在执行上下文的之后会创建作用域链,作用域链会产生一个栈,栈中是各个作用域,每个作用域用一个对象表示,对象中有 this(函数)/作用域下创建的变量(检测到函数在作用域下被调用才会挂载作用域下创建的函数)

各种创建的作用域的执行上下文内部对象名

- 块级作用域: Block
- 函数作用域: Local
- 全局let/const作用域: Script
- 全局作用域: Global